---
import Post from "../../layouts/Post.astro";
import { getPosts, getPostDetail } from "../../library/microcms";
import { remark } from "remark";
import remarkHtml from "remark-html";

export const getStaticPaths = async () => {
  const response = await getPosts("news", { fields: ["id"] });
  return response.contents.map((news) => ({
    params: {
      slug: news.id,
    },
  }));
};
const processContentToHTML = (content) => {
  const processedContent = remark().use(remarkHtml).process(content);
  return processedContent;
};

const { slug } = Astro.params;
const news = await getPostDetail(slug, "news");
// const processedNews = processContentToHTML(news.content);
---

<Post {...news}>
  <div set:html={news.content} />
</Post>
