---
import Post from "../../layouts/Post.astro";
import { getPosts, getPostDetail } from "../../library/microcms";

export const getStaticPaths = async () => {
  const response = await getPosts("blogs", { fields: ["id"] });
  return response.contents.map((blog) => ({
    params: {
      slug: blog.id,
    },
  }));
};

const { slug } = Astro.params;
const blog = await getPostDetail(slug, "blogs");
---

<Post {...blog}>
  <div set:html={blog.content} />
</Post>
