---
import { Image } from "@astrojs/image/components";
import type { PostItem } from "@types";

import posts from "@blogContents/posts.json";

const blogs: PostItem[] = posts.sort((a, b) => new Date(b.isoDate).valueOf() - new Date(a.isoDate).valueOf());
const topThreeBlogs = blogs.slice(0, 3);
---

<h2 class="py-10 text-4xl font-bold">ブログ</h2>
<div class="grid h-auto grid-cols-1 content-center px-4 lg:grid-cols-3">
  {
    topThreeBlogs.map((e) => (
      <a href={e.link}>
        <div class="lg:px-18 mx-6 my-3 grid grid-cols-1 grid-rows-5 place-items-center content-center overflow-hidden rounded-lg bg-gray-100 py-3 shadow-lg lg:mx-12 lg:h-80">
          <div class="w-54 relative row-span-3 mx-auto px-4 xl:w-full xl:px-12">
            <Image
              class="aspect-video h-full w-full rounded-lg object-cover"
              src={e.ogpPath || "/icons/image_placeholder.png"}
              alt={e.title}
              format="png"
              height={340}
              width={610}
              fit="cover"
            />
          </div>
          <div class="row-span-2 px-6 py-4">
            <div class="mb-2 text-xl font-bold">{e.title}</div>
            <time class="text-base text-gray-700">{e.isoDate.split("T")[0]}</time>
          </div>
        </div>
      </a>
    ))
  }
</div>
<div class="mx-auto grid py-10 text-center font-bold">
  <a href="/blog">ブログ一覧</a>
</div>
